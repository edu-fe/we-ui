<div class="bdsharebuttonbox" data-tag="share_1">
	<!-- <a class="bds_mshare" data-cmd="mshare"></a> -->
	<a class="bds_sqq" data-cmd="sqq">分享给QQ好友</a>
	<a class="bds_qzone" data-cmd="qzone">分享到QQ空间</a>
	<!-- <a class="bds_tsina" data-cmd="tsina"></a> -->
	<!-- <a class="bds_baidu" data-cmd="baidu"></a> -->
	<!-- <a class="bds_renren" data-cmd="renren"></a> -->
	<!-- <a class="bds_tqq" data-cmd="tqq"></a> -->
	
	<a class="bds_weixin" data-cmd="weixin">分享到微信</a>
	<a class="bds_tsina" data-cmd="tsina">分享到微博</a>
	<!-- <a class="bds_more" data-cmd="more">更多</a> -->
	<!-- <a class="bds_count" data-cmd="count"></a> -->
</div>
<style type="text/css">
	a[data-cmd] {
		display: block;
		clear: both;
		text-decoration: none;
		cursor: pointer;
		
	}
	
	.bdsharebuttonbox{
		border: 1px solid #ddd;
		width: 120px;
		padding: 10px;
		background-color: #fff;
	}

	.bdshare-slide-button{
		display:none !important;
	}
</style>
<script>
	if(!!localStorage.currentDetails) {
		var currentDetails = JSON.parse(localStorage.currentDetails)
	}
	
	/**
	 * 解析window.location.serch
	 */
	function getSeachByName(name) {
		var reg = new RegExp("[?|&]" + name + "=([^&]*)(&|$)", "i");
		var r = window.parent.location.href.match(reg);
		if(r != null) return(r[1].split('#')[0]);
		return null;
	}
	
	// 获取html代码的纯文本
	function removeHTMLTag(str) {
            str = str.replace(/<\/?[^>]*>/g,''); //去除HTML tag
            str = str.replace(/[ | ]*\n/g,'\n'); //去除行尾空白
            //str = str.replace(/\n[\s| | ]*\r/g,'\n'); //去除多余空行
            str=str.replace(/&nbsp;/ig,'');//去掉&nbsp;
            str=str.replace(/\s/g,''); //将空格去掉
            // 最多100字
            str = str.substr(0, 100) + '...'
            return str;
	}
	
	// 处理url
	function doUrl() {
		var query = '&releaseId=' + window.parent.location.hash.split('/')[3] + '&topicId=' + getSeachByName('topicId')+'&type=' + getSeachByName('type')
        switch (getSeachByName('type')){
        	case '1':
        		return 'page=shareTopic' + query
        		break;
        	case '2':
        		if(!!getSeachByName('opusId')) { // 写作详情页
        			return 'page=shareWritingDetail' + query
        		} else { // 写作列表页
        			return 'page=shareWritingList' + query
        		}
        		break;
        	case '3':
        		return 'page=shareGroup' + query
        		break;
        	default:
        		break;
        }
	}
	
	
	window._bd_share_config = {
		common : {
			bdText : currentDetails? currentDetails.title:'暂无标题',	
			bdDesc : currentDetails? removeHTMLTag(currentDetails.content):'暂无内容',	
			bdUrl : window.parent.location.href.split("#")[0] + '?' + doUrl(), 	
			bdPic : ''
		},
		share : [{
			"bdSize" : 6
		}],
		slide : [{	   
			bdImg : 0,
			bdPos : "right",
			bdTop : 100
		}],
		image : [{
			viewType : 'list',
			viewPos : 'top',
			viewColor : 'black',
			viewSize : '16',
			viewList : ['qzone','tsina','huaban','tqq','renren']
		}],
		selectShare : [{
			"bdselectMiniList" : ['qzone','tqq','kaixin001','bdxc','tqf']
		}]
	}
	console.log(doUrl(),getSeachByName('type'))
	with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>